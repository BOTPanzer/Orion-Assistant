<style>
  .list {
    color: var(--text1);
    overflow: hidden;
    overflow-x: auto;
    display: flex;

    padding-bottom: 5px;
    margin-left: 5px; 
    margin-right: 5px;
  }

  .listFeatured {
    flex-grow: 1;
    height: 100%;

    position: relative;
    display: flex;
    transition: all 0.4s;
    overflow: hidden;

    border-radius: 40px;

    background-color: var(--progress);
    background-position: center;
    background-size: cover;

    color: var(--text1);
    box-shadow: var(--shadow);
  }

  .listItems {
    height: 100%;
    min-width: fit-content;

    padding-top: 2px;
    padding-bottom: 2px;

    overflow-y: auto;
    overflow-x: hidden;

    display: flex;
    flex-direction: column;
    flex-wrap: nowrap;
    gap: 10px 0px;

    color: var(--text1);
  }
</style>





<div class="win-c">
  <div class="win-t">
    <o-rbutton style="padding-left: 10px;" onclick="document.getElementById('storeSearchInput').input.focus()">
      <svg id="storeSearch" viewBox="0 0 488 488" style="width: 18px; height: 18px; margin: 10px;">
        <path d="M452.2,425.6L330.8,304.1c23.9-28.7,38.3-65.4,38.3-105.4c0-91.4-75-165.7-167.3-165.7S34.4,107.4,34.4,198.8s75,165.7,167.3,165.7c39.2,0,75.3-13.4,103.9-35.9l121.8,121.8c7.1,7.1,17.7,7.1,24.8,0C459.3,443.3,459.3,432.7,452.2,425.6zM70,198.8C70,127,129.1,68.6,201.7,68.6S333.4,127,333.4,198.8s-59.1,130.2-131.7,130.2S70,270.5,70,198.8z"/>
      </svg>
      <o-input id="storeSearchInput" style="width: 140px; margin-left: 5px;" placeholder="Search" label="Search" transparent></o-input>
    </o-rbutton>
    <o-sbutton id="storeDiscover" text="Home">
      <svg viewBox="0 0 24 24">
        <path d="M20.0402 6.82165L14.2802 2.79165C12.7102 1.69165 10.3002 1.75165 8.79023 2.92165L3.78023 6.83165C2.78023 7.61165 1.99023 9.21165 1.99023 10.4716V17.3716C1.99023 19.9216 4.06023 22.0016 6.61023 22.0016H17.3902C19.9402 22.0016 22.0102 19.9316 22.0102 17.3816V10.6016C22.0102 9.25165 21.1402 7.59165 20.0402 6.82165ZM12.7502 18.0016C12.7502 18.4116 12.4102 18.7516 12.0002 18.7516C11.5902 18.7516 11.2502 18.4116 11.2502 18.0016V15.0016C11.2502 14.5916 11.5902 14.2516 12.0002 14.2516C12.4102 14.2516 12.7502 14.5916 12.7502 15.0016V18.0016Z"/>
      </svg>
    </o-sbutton>
    <o-sbutton id="storeStatus" text="Status">
      <svg viewBox="0 0 24 24">
        <path d="M16.19 2H7.81C4.17 2 2 4.17 2 7.81V16.18C2 19.83 4.17 22 7.81 22H16.18C19.82 22 21.99 19.83 21.99 16.19V7.81C22 4.17 19.83 2 16.19 2ZM9.91 16.19C9.91 16.83 9.39 17.35 8.74 17.35C8.1 17.35 7.58 16.83 7.58 16.19V12.93C7.58 12.29 8.1 11.77 8.74 11.77C9.39 11.77 9.91 12.29 9.91 12.93V16.19ZM16.42 16.19C16.42 16.83 15.9 17.35 15.26 17.35C14.61 17.35 14.09 16.83 14.09 16.19V7.81C14.09 7.17 14.61 6.65 15.26 6.65C15.9 6.65 16.42 7.17 16.42 7.81V16.19Z"/>
      </svg>
    </o-sbutton>
    <div style="flex-grow: 1; margin-right: -20px;"></div>
    <o-rbutton id="storeSaved" text="Saved">
      <svg viewBox="0 0 24 24">
        <path d="M16.44 3.10156C14.63 3.10156 13.01 3.98156 12 5.33156C10.99 3.98156 9.37 3.10156 7.56 3.10156C4.49 3.10156 2 5.60156 2 8.69156C2 9.88156 2.19 10.9816 2.52 12.0016C4.1 17.0016 8.97 19.9916 11.38 20.8116C11.72 20.9316 12.28 20.9316 12.62 20.8116C15.03 19.9916 19.9 17.0016 21.48 12.0016C21.81 10.9816 22 9.88156 22 8.69156C22 5.60156 19.51 3.10156 16.44 3.10156Z"/>
      </svg>
    </o-rbutton>
  </div>
  
  <o-rbutton id="status-container" hover="none" cursor="auto" style="width: calc(100% - 100px); min-height: 0; height: 0; margin: 0 50px; justify-content: space-around; transform: translateY(-1em); transition: all .2s, height 0s; opacity: 0;">
    <div class="hc" style="align-items: center; margin: 20px 0; cursor: pointer;" onclick="openStore('ElAmigos', 'https://www.elamigos-games.com/')">
      <span>ElAmigos</span>
      <div id="status-elamigos" style="width: 10px; height: 10px; margin-left: 10px; border-radius: 5px;"></div>
    </div>
    <div class="hc" style="align-items: center; margin: 20px 0; cursor: pointer;" onclick="openStore('Figirl', 'https://fitgirl-repacks.site/')">
      <span>Fitgirl</span>
      <div id="status-fitgirl" style="width: 10px; height: 10px; margin-left: 10px; border-radius: 5px;"></div>
    </div>
    <div class="hc" style="align-items: center; margin: 20px 0; cursor: pointer;" onclick="openStore('Pivi', 'https://pivigames.blog/')">
      <span >Pivi</span>
      <div id="status-pivi" style="width: 10px; height: 10px; margin-left: 10px; border-radius: 5px;"></div>
    </div>
    <div class="hc" style="align-items: center; margin: 20px 0; cursor: pointer;" onclick="openStore('Steam Unlocked', 'https://steamunlocked.net/')">
      <span>Steam Unlocked</span>
      <div id="status-steamunlocked" style="width: 10px; height: 10px; margin-left: 10px; border-radius: 5px;"></div>
    </div>
    <div class="hc" style="align-items: center; margin: 20px 0; cursor: pointer;" onclick="openStore('Onlinefix', 'https://online-fix.me/')">
      <span>Onlinefix</span>
      <div id="status-onlinefix" style="width: 10px; height: 10px; margin-left: 10px; border-radius: 5px;"></div>
    </div>
  </o-rbutton>

  <div id="storeResults" style="width: 100%; text-align: center; color: var(--text2); display: none;">Results</div>

  <div class="vc" id="storeLoading" style="width: 100%; align-items: center; line-height: normal; display: flex;">
    <div style="font-size: 100px; margin-top: 20px;">ðŸ¤‘</div>
    <div style="font-size: 15px; color: var(--text1);">Searching...</div>
    <div class="glow" style="width: 140px; height: 15px; margin-top: 10px; border-radius: 7.5px; background-color: var(--success)"></div>
  </div>
  <div class="vc" id="storeEmpty" style="width: 100%; align-items: center; line-height: normal; display: none;">
    <div style="font-size: 100px; margin-top: 20px;">ðŸ¤”</div>
    <div style="font-size: 15px; color: var(--text1);">Where are all the Games?</div>
    <div style="font-size: 15px; color: var(--text2);">There are no Results</div>
  </div>
  <div id="storeList" class="vc" style="margin: 0 30px 30px 30px; gap: 60px;"></div>
</div>





<script>
  //MODULE NAME USED IN - TRAY & MAIN.HTML & LIBRARY & SETTINGS ðŸ˜¡
  
  // /$$    /$$  /$$$$$$  /$$$$$$$  /$$$$$$  /$$$$$$  /$$$$$$$  /$$       /$$$$$$$$  /$$$$$$ 
  //| $$   | $$ /$$__  $$| $$__  $$|_  $$_/ /$$__  $$| $$__  $$| $$      | $$_____/ /$$__  $$
  //| $$   | $$| $$  \ $$| $$  \ $$  | $$  | $$  \ $$| $$  \ $$| $$      | $$      | $$  \__/
  //|  $$ / $$/| $$$$$$$$| $$$$$$$/  | $$  | $$$$$$$$| $$$$$$$ | $$      | $$$$$   |  $$$$$$ 
  // \  $$ $$/ | $$__  $$| $$__  $$  | $$  | $$__  $$| $$__  $$| $$      | $$__/    \____  $$
  //  \  $$$/  | $$  | $$| $$  \ $$  | $$  | $$  | $$| $$  \ $$| $$      | $$       /$$  \ $$
  //   \  $/   | $$  | $$| $$  | $$ /$$$$$$| $$  | $$| $$$$$$$/| $$$$$$$$| $$$$$$$$|  $$$$$$/
  //    \_/    |__/  |__/|__/  |__/|______/|__/  |__/|_______/ |________/|________/ \______/

  storeModulePath = currentModule
  storeLastUpdated = 0
  storeSearch = ''
  storeFailed = 0
  storeCreated = 0
  storeCreatedRow = false
  storeListLeft = true
  store = getKey('store')
  

  //  /$$$$$$   /$$$$$$  /$$$$$$$  /$$$$$$$$
  // /$$__  $$ /$$__  $$| $$__  $$| $$_____/
  //| $$  \__/| $$  \ $$| $$  \ $$| $$      
  //| $$      | $$  | $$| $$  | $$| $$$$$   
  //| $$      | $$  | $$| $$  | $$| $$__/   
  //| $$    $$| $$  | $$| $$  | $$| $$      
  //|  $$$$$$/|  $$$$$$/| $$$$$$$/| $$$$$$$$
  // \______/  \______/ |_______/ |________/

  //SHOW SCROLLBAR
  document.getElementById('window').style.overflowY = 'scroll'

  //SETTINGS KEY
  if (store == undefined) {
    store = { 
      status: false,
      saved: []
    }
    setKey('store', store)
  }

  //STATUS MENU
  if (store.status) {
    document.getElementById('status-container').style.height = 'auto'
    document.getElementById('status-container').style.opacity = '1'
  }

  
  // /$$       /$$$$$$  /$$$$$$  /$$$$$$$$ /$$$$$$$$ /$$   /$$ /$$$$$$$$ /$$$$$$$   /$$$$$$ 
  //| $$      |_  $$_/ /$$__  $$|__  $$__/| $$_____/| $$$ | $$| $$_____/| $$__  $$ /$$__  $$
  //| $$        | $$  | $$  \__/   | $$   | $$      | $$$$| $$| $$      | $$  \ $$| $$  \__/
  //| $$        | $$  |  $$$$$$    | $$   | $$$$$   | $$ $$ $$| $$$$$   | $$$$$$$/|  $$$$$$ 
  //| $$        | $$   \____  $$   | $$   | $$__/   | $$  $$$$| $$__/   | $$__  $$ \____  $$
  //| $$        | $$   /$$  \ $$   | $$   | $$      | $$\  $$$| $$      | $$  \ $$ /$$  \ $$
  //| $$$$$$$$ /$$$$$$|  $$$$$$/   | $$   | $$$$$$$$| $$ \  $$| $$$$$$$$| $$  | $$|  $$$$$$/
  //|________/|______/ \______/    |__/   |________/|__/  \__/|________/|__/  |__/ \______/

  ipcRenderer.on('specialData', (event, specialData) => {
    if (specialData == undefined) specialData = ''
    document.getElementById('storeSearchInput').value = specialData
    searchGames(specialData)
  })

  //SEARCH
  clickListener('storeSearch', function() {
    event.stopPropagation()
    let search = document.getElementById('storeSearchInput').value
    if (search == '') return
    searchGames(search)
  })

  keydownListener('storeSearchInput', function() {
    if (event.which != 13) return
    event.preventDefault()
    let search = document.getElementById('storeSearchInput').value
    if (search == '') return
    searchGames(search)
    return false
  })

  //DISCOVER
  clickListener('storeDiscover', function() {
    if (storeSearch != '')
      searchGames('')
  })

  //STATUS
  clickListener('storeStatus', function() {
    if ($('#status-container').is(':animated')) return
    if (store.status) {
      $('#status-container').animate({height: '0'}, 200, function() {
        document.getElementById('status-container').style.opacity = '0'
        store.status = false
        setKey('store', store)
      })
    } else {
      var el = $('#status-container'),
      curHeight = el.height(),
      autoHeight = el.css('height', 'auto').height()
      document.getElementById('status-container').style.opacity = '1'
      el.height(curHeight).animate({height: autoHeight}, 200, function() {
        store.status = true
        setKey('store', store)
      })
    }
  })

  //SAVED
  clickListener('storeSaved', function() {
    let dialogid = createDialog(fs.readFileSync(currentModule+'saved.html').toString(), 'Save List')

    //PREPARE DIALOG
    if (!Array.isArray(store.saved)) store.saved = []
    if (store.saved.length == 0) {
      document.getElementById('savedEmpty').style.display = 'flex'
    } else {
      document.getElementById('savedEmpty').style.display = 'none'
      for (i in store.saved) {
        let id = 'saved'+i
        let id2 = 'img-'+id
        let name = store.saved[i].name
        let link = store.saved[i].link
        let image = store.saved[i].image
        document.getElementById('savedList').insertAdjacentHTML('beforeend', createStoreItemHTML(id, image, name))
        document.getElementById(id).onclick = function() { openLink(link) }
        document.getElementById(id).oncontextmenu = function() { 
          document.getElementById('savedWindow').style.display = 'none'
          document.getElementById('removeTitle').innerHTML = `Remove '${name}'?`
          document.getElementById('removeWindow').style.display = 'flex'
          let item = this
          //REMOVE LISTENER
          document.getElementById('removeRemove').onclick = null
          document.getElementById('removeRemove').onclick = function() {
            let e = Array.prototype.indexOf.call(item.parentNode.childNodes, item)
            item.remove()
            store.saved.splice(e-1,1)
            setKey('store', store)
            createNoti('Store', 'Removed from Save List')
            if (store.saved.length == 0) document.getElementById('savedEmpty').style.display = 'flex'
            document.getElementById('savedWindow').style.display = 'flex'
            document.getElementById('removeWindow').style.display = 'none'
          }
        }
      }
      clickListener('removeCancel', function() {
        document.getElementById('savedWindow').style.display = 'flex'
        document.getElementById('removeWindow').style.display = 'none'
      })
    }
  })


  // /$$$$$$$$ /$$   /$$ /$$   /$$  /$$$$$$  /$$$$$$$$ /$$$$$$  /$$$$$$  /$$   /$$  /$$$$$$ 
  //| $$_____/| $$  | $$| $$$ | $$ /$$__  $$|__  $$__/|_  $$_/ /$$__  $$| $$$ | $$ /$$__  $$
  //| $$      | $$  | $$| $$$$| $$| $$  \__/   | $$     | $$  | $$  \ $$| $$$$| $$| $$  \__/
  //| $$$$$   | $$  | $$| $$ $$ $$| $$         | $$     | $$  | $$  | $$| $$ $$ $$|  $$$$$$ 
  //| $$__/   | $$  | $$| $$  $$$$| $$         | $$     | $$  | $$  | $$| $$  $$$$ \____  $$
  //| $$      | $$  | $$| $$\  $$$| $$    $$   | $$     | $$  | $$  | $$| $$\  $$$ /$$  \ $$
  //| $$      |  $$$$$$/| $$ \  $$|  $$$$$$/   | $$    /$$$$$$|  $$$$$$/| $$ \  $$|  $$$$$$/
  //|__/       \______/ |__/  \__/ \______/    |__/   |______/ \______/ |__/  \__/ \______/

  //SEARCH
  function searchGames(search) {
    if (search == undefined) search = ''
    storeSearch = search
    storeListLeft = true
    storeFailed = 0
    storeCreated = 0
    storeCreatedRow = false
    document.getElementById('storeLoading').style.display = 'flex'
    document.getElementById('storeEmpty').style.display = 'none'

    const storeResizeOb = new ResizeObserver(function(entries) {
      let contentW = document.getElementById('window').offsetWidth
      document.body.style.setProperty('--storeListHeight', contentW/2.5+'px')
    })
    storeResizeOb.observe(document.querySelector("#window"))
    
    $('#storeList *').off()
    searchingResults('elamigos')
    searchingResults('fitgirl')
    searchingResults('pivi')
    searchingResults('steamunlocked')
    if (search == '') {
      document.getElementById('storeResults').style.display = 'none'
    } else {
      document.getElementById('storeResults').style.display = 'block'
      document.getElementById('storeResults').innerHTML = `Showing Results for: <span style="color: var(--text1);">${titleCase(search)}</span>`
    }
    document.getElementById('storeList').innerHTML = ''

    search = search.toLowerCase().replaceAll(' ', '+')
    let storeUpdated = Date.now()
    storeLastUpdated = storeUpdated

    //ELAMIGOS
    let fullURL = 'https://www.elamigos-games.com/?q='+search
    if (search == '') fullURL = 'https://www.elamigos-games.com/'
    getHTMLAgent(fullURL).then(function(result) {
      if (result == undefined) noResults('elamigos')
      else parseElamigos(result, storeUpdated)
    })
    
    //FITGIRL
    fullURL = 'https://fitgirlrepacks.co/search/'+search
    if (search == '' || search.length < 3) fullURL = 'https://fitgirlrepacks.co/'
    getHTMLAgent(fullURL).then(function(result) {
      if (result == undefined) noResults('fitgirl')
      else parseFitgirl(result, storeUpdated)
    })

    //PIVI
    fullURL = 'https://pivigames.blog/?s='+search
    if (search == '') fullURL = 'https://pivigames.blog/'
    getHTMLAgent(fullURL).then(function(result) {
      if (result == undefined) noResults('pivi')
      else parsePivi(result, storeUpdated)
    })

    //STEAM UNLOCKED
    fullURL = 'https://steamunlocked.net/?s='+search
    if (search == '') fullURL = 'https://steamunlocked.net/'
    getHTMLAgent(fullURL).then(function(result) {
      if (result == undefined) noResults('steamunlocked')
      else parseSteamunlocked(result, storeUpdated, search)
    })

    //ONLINEFIX
    fullURL = 'https://online-fix.me/index.php?do=search&subaction=search&story='+search
    if (search == '') fullURL = 'https://online-fix.me/'
    getHTMLAgent(fullURL).then(function(result) {
      if (result == undefined) noResults('onlinefix')
      else parseOnlinefix(result, storeUpdated, search)
    })
  }
  
  async function getHTMLAgent(url) {
    //process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';
    const superagent = require('superagent')
    const response = await superagent.get(url).set('User-Agent', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36').catch(function(err){ 
      console.log('no va '+url, err)
    })
    if (response != undefined) return response.text
  }

  //STORE
  function parseElamigos(result, storeUpdated) {
    if (currentModule != storeModulePath) return
    if (storeUpdated != storeLastUpdated) return
    let part = result.substring(result.indexOf('<div class="col-lg-2 '), result.indexOf('<!-- /.row -->'))
    let si = part.split('<div class="col-lg-2 ')
    let items = []
    //LINKS & NAMES & IMAGES
    for(i in si) {
      if (items.length == 12) break
      //LINK
      let tmp = si[i].substring(si[i].lastIndexOf('href="')+6)
      tmp = tmp.substring(0, tmp.indexOf('<'))
      let link = tmp.substring(0, tmp.indexOf('"'))
      //IMAGE
      let img = si[i].substring(si[i].indexOf('src="')+5)
      img = 'https://www.elamigos-games.com'+img.substring(0, img.indexOf('"'))
      //NAME
      let name = tmp.substring(tmp.indexOf('>')+1)
      //INFO
      let info = si[i].substring(si[i].lastIndexOf('<small>')+7)
      info = info.substring(0, info.indexOf('</small>'))
      info = info.replaceAll('+', '').trim()
      //CREATE ITEM OBJECT
      if (link != '' && img != '' && link.startsWith('https://www.elamigos-games.com')) {
        items.push({
          link: link,
          image: img,
          name: titleCase(name),
          info: info
        })
      }
    }
    //HAS RESULTS & STORE TYPE
    let isRow = false
    if (items.length == 0) {
      noResults('elamigos')
      return
    } else if (!storeCreatedRow && storeCreated > 0 && items.length >= 3) {
      isRow = true
      createStoreRow('elamigos', 'https://www.elamigos-games.com/', 'ElAmigos')
    } else {
      createStore('elamigos', 'https://www.elamigos-games.com/', 'ElAmigos')
    }
    //ADD GAMES
    for(i in items) {
      //DATA
      let id = `elamigos${i}-${Date.now()}`
      let link = items[i].link
      let image = items[i].image
      let name = items[i].name
      let info = items[i].info
      //CREATE ITEM ELEMENT
      if (isRow) {
        document.getElementById('list-elamigos')
          .insertAdjacentHTML('beforeend', createStoreItemRowHTML(id, image, name, info))
        addListenerRow(id, link, 'elamigos', name, info)
      } else {
        document.getElementById('list-elamigos')
          .insertAdjacentHTML('beforeend', createStoreItemHTML(id, image, name, info))
        addListener(id, link, 'elamigos', name, info)
      }
    }
    //CLICK FIRST
    if (!isRow && document.getElementById("list-elamigos").childNodes.length > 0) document.getElementById("list-elamigos").firstChild.click()
  }

  function parseFitgirl(result, storeUpdated) {
    if (currentModule != storeModulePath) return
    if (storeUpdated != storeLastUpdated) return
    if (!result.includes('<article class="post')) {
      noResults('fitgirl')
      return
    }
    let part = result.substring(result.indexOf('<article class="post'), result.indexOf('<nav class="navigation paging-navigation"'))
    let si = part.split('<article class="post')
    let items = []
    //LINKS & NAMES
    for(i in si) {
      //LINK
      let link = si[i].substring(si[i].indexOf('href="https://fitgirlrepacks.co/repack')+6)
      link = link.substring(0, link.indexOf('"'))
      link = link.substring(link.lastIndexOf('/'))
      link = link.substring(link.indexOf('-')+1)
      link = 'https://fitgirl-repacks.site/'+link
      //IMAGE
      let img = ''
      if (si[i].includes('src="')) {
        img = si[i].substring(si[i].indexOf('src="')+5)
        img = img.substring(0, img.indexOf('"'))
      }
      //NAME
      let name = si[i].substring(si[i].indexOf('rel="bookmark">')+15)
      name = name.substring(0, name.indexOf('<'))
      //INFO
      let info = ''
      if (name.includes('&#8211;')) {
        let name2 = name.substring(0, name.indexOf('&#8211;')).trim()
        info = name.substring(name.indexOf('&#8211;')+7).trim()
        name = name2
      }
      //CREATE ITEM OBJECT
      if (link != '' && name != '' && name != 'Upcoming repacks') {
        items.push({
          link: link,
          image: img,
          name: titleCase(name),
          info: info
        })
      }
    }
    //HAS RESULTS & STORE TYPE
    let isRow = false
    if (items.length == 0) {
      noResults('fitgirl')
      return
    } else if (!storeCreatedRow && storeCreated > 0 && items.length >= 3) {
      isRow = true
      createStoreRow('fitgirl', 'https://fitgirl-repacks.site/', 'Fitgirl')
    } else {
      createStore('fitgirl', 'https://fitgirl-repacks.site/', 'Fitgirl')
    }
    //ADD GAMES
    for(i in items) {
      //DATA
      let id = `fitgirl${i}-${Date.now()}`
      let link = items[i].link
      let image = items[i].image
      let name = items[i].name
      let info = items[i].info
      //CREATE ITEM ELEMENT
      if (isRow) {
        document.getElementById('list-fitgirl')
          .insertAdjacentHTML('beforeend', createStoreItemRowHTML(id, image, name, info))
        addListenerRow(id, link, 'fitgirl', name, info)
      } else {
        document.getElementById('list-fitgirl')
          .insertAdjacentHTML('beforeend', createStoreItemHTML(id, image, name, info))
        addListener(id, link, 'fitgirl', name, info)
      }
      //IMAGE
      if (image == '') fitgirlImg(link).then((image) => { 
        let imgElem = document.getElementById('img-'+id)
        if (imgElem != null) {
          if (imgElem.tagName == 'IMG')
            imgElem.src = image
          else {
            imgElem.style.backgroundImage = `url('${image}')`
            if (document.getElementById('link-fitgirl').innerHTML == link)
              document.getElementById('featured-fitgirl').style.backgroundImage = `url('${image}')`
          }

        }
      })
    }
    //CLICK FIRST
    if (!isRow && document.getElementById("list-fitgirl").childNodes.length > 0) document.getElementById("list-fitgirl").firstChild.click()

    async function fitgirlImg(link) {
      const superagent = require('superagent');
      const response = await superagent.get(link)
      let html = response.text
      
      let img = html.substring(html.indexOf('<h1 class="entry-title">'))
      img = img.substring(img.indexOf('src="')+5)
      img = img.substring(0, img.indexOf('"'))
      return img
    }
  }

  function parsePivi(result, storeUpdated) {
    if (currentModule != storeModulePath) return
    if (storeUpdated != storeLastUpdated) return
    let part = result.substring(result.indexOf('<div id="gp-content-wrapper"')) //remove top bar
    part = part.substring(part.indexOf('<section class="gp-post-item gp-standard-post'))
    let si = part.split('<section')
    let items = []
    //LINKS & NAMES & IMAGES
    for(i in si) {
      let tmp = si[i].toLowerCase()
      if (!tmp.includes('>estrenos<') && !tmp.includes('>tops<') && !tmp.includes('>promociones<') && !tmp.includes('>oferta<') && !tmp.includes('>free to play<') && !tmp.includes('>destacadas<')) {
        //LINK
        let link = si[i].substring(si[i].indexOf('href="')+6)
        link = link.substring(0, link.indexOf('"')-1)
        //IMAGE
        let img = si[i].substring(si[i].indexOf('src="')+5)
        img = img.substring(0, img.indexOf('"'))
        //NAME
        let name = si[i].substring(si[i].indexOf('title="')+7)
        name = name.substring(0, name.indexOf('"'))
        //INFO
        let info = ''
        if (name.toLowerCase().includes('pc ')) {
          let name2 = name.substring(0, name.toLowerCase().indexOf('pc ')).trim()
          info = name.substring(name.toLowerCase().indexOf('pc ')+2).replaceAll('+', '').trim()
          name = name2
        }
        //CREATE ITEM OBJECT
        if (link != '' && name != '' && !name.toLowerCase().includes('sorteo') && img != '' && link.startsWith('https://pivigames.blog/') && !link.startsWith('https://pivigames.blog/dmca')) {
          items.push({
            link: link,
            image: img,
            name: titleCase(name),
            info: info
          })
        }
      }
    }
    //HAS RESULTS & STORE TYPE
    let isRow = false
    if (items.length == 0) {
      noResults('pivi')
      return
    } else if (!storeCreatedRow && storeCreated > 0 && items.length >= 3) {
      isRow = true
      createStoreRow('pivi', 'https://pivigames.blog/', 'Pivi')
    } else {
      createStore('pivi', 'https://pivigames.blog/', 'Pivi')
    }
    //ADD GAMES
    for(i in items) {
      //DATA
      let id = `pivi${i}-${Date.now()}`
      let link = items[i].link
      let image = items[i].image
      let name = items[i].name
      let info = items[i].info
      //CREATE ITEM ELEMENT
      if (isRow) {
        document.getElementById('list-pivi')
          .insertAdjacentHTML('beforeend', createStoreItemRowHTML(id, image, name, info))
        addListenerRow(id, link, 'pivi', name, info)
      } else {
        document.getElementById('list-pivi')
          .insertAdjacentHTML('beforeend', createStoreItemHTML(id, image, name, info))
        addListener(id, link, 'pivi', name, info)
      }
    }
    //CLICK FIRST
    if (!isRow && document.getElementById("list-pivi").childNodes.length > 0) document.getElementById("list-pivi").firstChild.click()
  }

  function parseSteamunlocked(result, storeUpdated, search) {
    if (currentModule != storeModulePath) return
    if (storeUpdated != storeLastUpdated) return
    let si
    if (search != '') {
      let part = result.substring(result.indexOf('class="cover-items"')) //remove top
      part = part.substring(0, part.indexOf('class="col-lg-4"')) //to bot
      si = part.split('class="cover-item category"')
    } else {
      let part = result.substring(result.indexOf('class="vc_pageable-slide-wrapper vc_clearfix"')) //remove top
      part = part.substring(0, part.indexOf('class="vc_pageable-load-more-btn"')) //to bot
      si = part.split('class="vc_grid-item vc_clearfix')
    }
    let items = []
    //LINKS & NAMES & IMAGES
    for(i in si) {
      if (items.length == 12) break
      //LINK
      let link = si[i].substring(si[i].indexOf('href="')+6)
      link = link.substring(0, link.indexOf('"')-1)
      //IMAGE
      let img = si[i].substring(si[i].lastIndexOf('src="')+5)
      img = img.substring(0, img.indexOf('"'))
      //NAME
      let name
      if (search != '') {
        name = si[i].substring(si[i].indexOf('<h1>')+4)
        name = name.substring(0, name.indexOf('</h1>'))
      } else {
        name = si[i].substring(si[i].indexOf('title="')+7)
        name = name.substring(0, name.indexOf('"'))
      }
      //INFO
      let info = ''
      if (name.toLowerCase().includes('free download')) {
        let name2 = name.substring(0, name.toLowerCase().indexOf('free download')).trim()
        info = name.substring(name.toLowerCase().indexOf('free download')+13).trim()
        name = name2
      }
      //CREATE ITEM OBJECT
      if (link != '' && name != '' && img != '') {
        items.push({
          link: link,
          image: img,
          name: titleCase(name),
          info: info
        })
      }
    }
    //HAS RESULTS & STORE TYPE
    let isRow = false
    if (items.length == 0) {
      noResults('steamunlocked')
      return
    } else if (!storeCreatedRow && storeCreated > 0 && items.length >= 3) {
      isRow = true
      createStoreRow('steamunlocked', 'https://steamunlocked.net/', 'Steam Unlocked')
    } else {
      createStore('steamunlocked', 'https://steamunlocked.net/', 'Steam Unlocked')
    }
    //ADD GAMES
    for(i in items) {
      let id = `steamunlocked${i}-${Date.now()}`
      let link = items[i].link
      let image = items[i].image
      let name = items[i].name
      let info = items[i].info
      //CREATE ITEM ELEMENT
      if (isRow) {
        document.getElementById('list-steamunlocked')
          .insertAdjacentHTML('beforeend', createStoreItemRowHTML(id, image, name, info))
        addListenerRow(id, link, 'steamunlocked', name, info)
      } else {
        document.getElementById('list-steamunlocked')
          .insertAdjacentHTML('beforeend', createStoreItemHTML(id, image, name, info))
        addListener(id, link, 'steamunlocked', name, info)
      }
    }
    //CLICK FIRST
    if (!isRow && document.getElementById("list-steamunlocked").childNodes.length > 0) document.getElementById("list-steamunlocked").firstChild.click()
  }
  
  function parseOnlinefix(result, storeUpdated, search) {
    if (currentModule != storeModulePath) return
    if (storeUpdated != storeLastUpdated) return
    let si
    try {
      let part = result.substring(result.indexOf('class="article clr"')) //remove top
      if (search)
        part = part.substring(0, part.indexOf('class="sidebar"')) //to bot
      else
        part = part.substring(0, part.indexOf('class="game-rating clr"')) //to bot
      si = part.split('class="article clr')
    } catch(e) {
      noResults('onlinefix')
      return
    }
    let items = []
    //LINKS & NAMES & IMAGES
    for(i in si) {
      if (items.length == 12) break
      //LINK
      let link = si[i].substring(si[i].indexOf('href="')+6)
      link = link.substring(0, link.indexOf('"')-1)
      //IMAGE
      let img = si[i].substring(si[i].indexOf('data-src="')+10)
      img = img.substring(0, img.indexOf('"'))
      //NAME
      let name = si[i].substring(si[i].indexOf('class="title"')+14)
      name = name.substring(0, name.indexOf('</h2>'))
      name = name.replaceAll('ï¿½', '').trim()
      //INFO
      let info = si[i].substring(si[i].indexOf('class="edit"')+13)
      info = info.substring(0, info.indexOf('</div>'))
      info = info.replaceAll('ï¿½', '').replaceAll('&nbsp;', '').trim()
      //CREATE ITEM OBJECT
      if (link != '' && name != '' && img != '') {
        items.push({
          link: link,
          image: img,
          name: name,
          info: info
        })
      }
    }
    //HAS RESULTS & STORE TYPE
    let isRow = false
    if (items.length == 0) {
      noResults('steamunlocked')
      return
    } else if (!storeCreatedRow && storeCreated > 0 && items.length >= 3) {
      isRow = true
      createStoreRow('onlinefix', 'https://online-fix.me/', 'Onlinefix')
    } else {
      createStore('onlinefix', 'https://online-fix.me/', 'Onlinefix')
    }
    //ADD GAMES
    console.log(items);
    for(i in items) {
      let id = `onlinefix${i}-${Date.now()}`
      let link = items[i].link
      let image = items[i].image
      let name = items[i].name
      let info = items[i].info
      //CREATE ITEM ELEMENT
      if (isRow) {
        document.getElementById('list-onlinefix')
          .insertAdjacentHTML('beforeend', createStoreItemRowHTML(id, image, name, info))
        addListenerRow(id, link, 'onlinefix', name, info)
      } else {
        document.getElementById('list-onlinefix')
          .insertAdjacentHTML('beforeend', createStoreItemHTML(id, image, name, info))
        addListener(id, link, 'onlinefix', name, info)
      }
    }
    //CLICK FIRST
    if (!isRow && document.getElementById("list-onlinefix").childNodes.length > 0) document.getElementById("list-onlinefix").firstChild.click()
  }
  
  //RESULTS
  function createStore(id, storeUrl, storeName) {
    storeCreated++
    storeCreatedRow = false

    document.getElementById('storeLoading').style.display = 'none'
    document.getElementById('status-'+id).style.background = 'var(--success)'
    document.getElementById('storeList')
      .insertAdjacentHTML('beforeend', createStoreHTML(id, storeUrl, storeName))

    clickListener('save-'+id, function() {
      let link = document.getElementById('link-'+id).innerHTML
      let name = document.getElementById('name2-'+id).innerHTML
      let image = document.getElementById('featured-'+id).style.backgroundImage
      image = image.substring(5, image.length-2)
      if (!Array.isArray(store.saved)) store.saved = []
      //CHECK IF IS ADDED
      let added = false
      for (i in store.saved) {
        if (store.saved[i].link == link) 
          added = true
      }
      //ADD
      if (added) {
        createNoti('Store', 'Already in Save List')
      } else {
        store.saved.push({
          name: name,
          link: link,
          image: image
        }) 
        setKey('store', store)
        createNoti('Store', 'Added to Save List')
      }
    })

    clickListener('open-'+id, function() {
      let link = document.getElementById('link-'+id).innerHTML
      let name = document.getElementById('name2-'+id).innerHTML
      createNoti('Store', name)
      openLink(link)
    })

    clickListener('preview-'+id, function() {
      let link = document.getElementById('link-'+id).innerHTML
      let name = document.getElementById('name2-'+id).innerHTML
      createNoti('Store', name)
      ipcRenderer.send('newSimpleWindow', link)
    })  
  }

  function createStoreRow(id, storeUrl, storeName) {
    storeCreated++
    storeCreatedRow = true

    document.getElementById('storeLoading').style.display = 'none'
    document.getElementById('status-'+id).style.background = 'var(--success)'
    document.getElementById('storeList')
      .insertAdjacentHTML('beforeend', createStoreRowHTML(id, storeUrl, storeName))

    clickListener('left-'+id, function() {
      document.getElementById('list-'+id).scrollBy(-550, 0)
    })

    clickListener('right-'+id, function() {
      document.getElementById('list-'+id).scrollBy(550, 0)
    })
  }

  function searchingResults(id) {
    document.getElementById('status-'+id).style.background = 'var(--progress)'
  }

  function noResults(id) {
    document.getElementById('status-'+id).style.background = 'var(--danger)'
    storeFailed++
    if (storeFailed == 4) {
      document.getElementById('storeLoading').style.display = 'none'
      document.getElementById('storeEmpty').style.display = 'flex'
    }
  }

  //HTML
  function createStoreItemHTML(id, img, name, info) {
    if (typeof info !== 'string' || info == '')
      return `<o-button id="${id}" content="box" style="width: 260px; min-height: 100px; margin-left: 10px; margin-right: 8px; --oBorderR: 40px; align-items: center;">
                <div id="img-${id}" style="min-width: 80px; min-height: 80px; margin: 10px; border-radius: 30px; box-shadow: inherit; background-color: var(--progress); background-image: url('${img}'); background-position: center; background-size: cover;"></div>
                <div style="width: 150px; margin: 10px 10px 10px 0; display: flex; flex-direction: column;">
                  <div id="name-${id}" style="width: 140px; text-align: center; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; text-overflow: ellipsis; overflow: hidden; font-size: 15px;">${name}</div>
                </div>
              </o-button>`
    else
      return `<o-button id="${id}" content="box" style="width: 260px; min-height: 100px; margin-left: 10px; margin-right: 8px; --oBorderR: 40px; align-items: center;">
                <div id="img-${id}" style="min-width: 80px; min-height: 80px; margin: 10px; border-radius: 30px; box-shadow: inherit; background-color: var(--progress); background-image: url('${img}'); background-position: center; background-size: cover;"></div>
                <div style="width: 150px; margin: 10px 10px 10px 0; display: flex; flex-direction: column; gap: 15px;">
                  <div id="name-${id}" style="width: 140px; text-align: center; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; text-overflow: ellipsis; overflow: hidden; font-size: 15px;">${name}</div>
                  <div id="info-${id}" style="width: 140px; text-align: center; display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; text-overflow: ellipsis; overflow: hidden; font-size: 13px; color: var(--text2);">${info}</div>
                </div>
              </o-button>`
  }

  function createStoreItemRowHTML(id, img, name, info) {
    if (typeof info !== 'string' || info == '')
      return `<o-button id="${id}" content="box" style="min-width: 255px; width: 255px; height: 330px; --oBorderR: 35px; flex-direction: column;">
                <div class="hc" style="width: 225px; height: 225px; margin: 15px; gap: 15px;">
                  <img id="img-${id}" style="min-width: 225px; height: 225px; border-radius: 20px; background: var(--progress); object-fit: cover;" src="${img}">
                  <div class="vc" style="gap: 10px; position: absolute; top: 20px; right: 20px;">
                    <o-rbutton id="save-${id}" ball small title="Save">
                      <svg viewBox="0 0 24 24">
                        <path d="M16.44 3.10156C14.63 3.10156 13.01 3.98156 12 5.33156C10.99 3.98156 9.37 3.10156 7.56 3.10156C4.49 3.10156 2 5.60156 2 8.69156C2 9.88156 2.19 10.9816 2.52 12.0016C4.1 17.0016 8.97 19.9916 11.38 20.8116C11.72 20.9316 12.28 20.9316 12.62 20.8116C15.03 19.9916 19.9 17.0016 21.48 12.0016C21.81 10.9816 22 9.88156 22 8.69156C22 5.60156 19.51 3.10156 16.44 3.10156Z"/>
                      </svg>
                    </o-rbutton>
                    <o-rbutton id="preview-${id}" ball small title="Preview">
                      <svg viewBox="0 0 24 24">
                        <path d="M21.25 9.14969C18.94 5.51969 15.56 3.42969 12 3.42969C10.22 3.42969 8.49 3.94969 6.91 4.91969C5.33 5.89969 3.91 7.32969 2.75 9.14969C1.75 10.7197 1.75 13.2697 2.75 14.8397C5.06 18.4797 8.44 20.5597 12 20.5597C13.78 20.5597 15.51 20.0397 17.09 19.0697C18.67 18.0897 20.09 16.6597 21.25 14.8397C22.25 13.2797 22.25 10.7197 21.25 9.14969ZM12 16.0397C9.76 16.0397 7.96 14.2297 7.96 11.9997C7.96 9.76969 9.76 7.95969 12 7.95969C14.24 7.95969 16.04 9.76969 16.04 11.9997C16.04 14.2297 14.24 16.0397 12 16.0397Z"/>
                        <path d="M11.9984 9.14062C10.4284 9.14062 9.14844 10.4206 9.14844 12.0006C9.14844 13.5706 10.4284 14.8506 11.9984 14.8506C13.5684 14.8506 14.8584 13.5706 14.8584 12.0006C14.8584 10.4306 13.5684 9.14062 11.9984 9.14062Z"/>
                      </svg>
                    </o-rbutton>
                  </div>
                </div>
                <div style="width: 225px; height: 60px; margin: 15px; margin-top: 0; display: flex; flex-direction: column; align-items: center; justify-content: space-around;">
                  <span id="name-${id}" style="font-size: 15px; line-height: 20px; text-align: center; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">${name}</span>
                </div>
              </o-button>`
    else
      return `<o-button id="${id}" content="box" style="min-width: 255px; width: 255px; height: 330px; --oBorderR: 35px; flex-direction: column;">
                <div class="hc" style="width: 225px; height: 225px; margin: 15px; gap: 15px;">
                  <img id="img-${id}" style="min-width: 225px; height: 225px; border-radius: 20px; background: var(--progress); object-fit: cover;" src="${img}">
                  <div class="vc" style="gap: 10px; position: absolute; top: 20px; right: 20px;">
                    <o-rbutton id="save-${id}" ball small title="Save">
                      <svg viewBox="0 0 24 24">
                        <path d="M16.44 3.10156C14.63 3.10156 13.01 3.98156 12 5.33156C10.99 3.98156 9.37 3.10156 7.56 3.10156C4.49 3.10156 2 5.60156 2 8.69156C2 9.88156 2.19 10.9816 2.52 12.0016C4.1 17.0016 8.97 19.9916 11.38 20.8116C11.72 20.9316 12.28 20.9316 12.62 20.8116C15.03 19.9916 19.9 17.0016 21.48 12.0016C21.81 10.9816 22 9.88156 22 8.69156C22 5.60156 19.51 3.10156 16.44 3.10156Z"/>
                      </svg>
                    </o-rbutton>
                    <o-rbutton id="preview-${id}" ball small title="Preview">
                      <svg viewBox="0 0 24 24">
                        <path d="M21.25 9.14969C18.94 5.51969 15.56 3.42969 12 3.42969C10.22 3.42969 8.49 3.94969 6.91 4.91969C5.33 5.89969 3.91 7.32969 2.75 9.14969C1.75 10.7197 1.75 13.2697 2.75 14.8397C5.06 18.4797 8.44 20.5597 12 20.5597C13.78 20.5597 15.51 20.0397 17.09 19.0697C18.67 18.0897 20.09 16.6597 21.25 14.8397C22.25 13.2797 22.25 10.7197 21.25 9.14969ZM12 16.0397C9.76 16.0397 7.96 14.2297 7.96 11.9997C7.96 9.76969 9.76 7.95969 12 7.95969C14.24 7.95969 16.04 9.76969 16.04 11.9997C16.04 14.2297 14.24 16.0397 12 16.0397Z"/>
                        <path d="M11.9984 9.14062C10.4284 9.14062 9.14844 10.4206 9.14844 12.0006C9.14844 13.5706 10.4284 14.8506 11.9984 14.8506C13.5684 14.8506 14.8584 13.5706 14.8584 12.0006C14.8584 10.4306 13.5684 9.14062 11.9984 9.14062Z"/>
                      </svg>
                    </o-rbutton>
                  </div>
                </div>
                <div style="width: 225px; height: 60px; margin: 15px; margin-top: 0; display: flex; flex-direction: column; align-items: center; justify-content: space-around;">
                  <span id="name-${id}" style="font-size: 15px; line-height: 20px; text-align: center; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">${name}</span>
                  <span id="info-${id}" style="font-size: 13px; line-height: 20px; text-align: center; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; color: var(--text2);">${info}</span>
                </div>
              </o-button>`
  }

  function createStoreHTML(id, store, name) {
    let list1 = ``
    let list2 = ``
    if (storeListLeft)
      list1 = `<div class="listItems" id="list-${id}"></div>`
    else 
      list2 = `<div class="listItems" id="list-${id}"></div>`
    storeListLeft = !storeListLeft
    return `<div class="vc">
              <o-sbutton id="title-${id}" text="${name}" style="margin: 10px;" onclick="openStore('${name}', '${store}')">
                <svg viewBox="0 0 24 24">
                  <path d="M19.8305 8.6998L15.3005 4.1698C14.3505 3.2198 13.0405 2.7098 11.7005 2.7798L6.70046 3.0198C4.70046 3.1098 3.11046 4.6998 3.01046 6.6898L2.77046 11.6898C2.71046 13.0298 3.21046 14.3398 4.16046 15.2898L8.69046 19.8198C10.5505 21.6798 13.5705 21.6798 15.4405 19.8198L19.8305 15.4298C21.7005 13.5798 21.7005 10.5598 19.8305 8.6998ZM9.50046 12.3798C7.91046 12.3798 6.62046 11.0898 6.62046 9.4998C6.62046 7.9098 7.91046 6.6198 9.50046 6.6198C11.0905 6.6198 12.3805 7.9098 12.3805 9.4998C12.3805 11.0898 11.0905 12.3798 9.50046 12.3798Z"/>
                </svg>
              </o-sbutton>
              <div style="height: var(--storeListHeight); display: flex; gap: 20px;">
                ${list1}
                <div id="featured-${id}" class="listFeatured">
                  <div style="width: 100%; height: fit-content; position: absolute; bottom: 0; display: flex; flex-direction: column;">
                    <div style="width: calc(100% - 40px); height: fit-content; padding: 20px; position: relative; display: flex; gap: 10px; align-items: center; background: linear-gradient(0deg, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.3) 90%, rgba(0,0,0,0) 100%);">
                      <div id="name-${id}" style="flex-grow: 1; font-size: 15px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 5; -webkit-box-orient: vertical;">Name</div>
                      <o-rbutton id="save-${id}" ball small title="Save">
                        <svg viewBox="0 0 24 24">
                          <path d="M16.44 3.10156C14.63 3.10156 13.01 3.98156 12 5.33156C10.99 3.98156 9.37 3.10156 7.56 3.10156C4.49 3.10156 2 5.60156 2 8.69156C2 9.88156 2.19 10.9816 2.52 12.0016C4.1 17.0016 8.97 19.9916 11.38 20.8116C11.72 20.9316 12.28 20.9316 12.62 20.8116C15.03 19.9916 19.9 17.0016 21.48 12.0016C21.81 10.9816 22 9.88156 22 8.69156C22 5.60156 19.51 3.10156 16.44 3.10156Z"/>
                        </svg>
                      </o-rbutton>
                      <o-rbutton id="preview-${id}" ball small title="Preview">
                        <svg viewBox="0 0 24 24">
                          <path d="M21.25 9.14969C18.94 5.51969 15.56 3.42969 12 3.42969C10.22 3.42969 8.49 3.94969 6.91 4.91969C5.33 5.89969 3.91 7.32969 2.75 9.14969C1.75 10.7197 1.75 13.2697 2.75 14.8397C5.06 18.4797 8.44 20.5597 12 20.5597C13.78 20.5597 15.51 20.0397 17.09 19.0697C18.67 18.0897 20.09 16.6597 21.25 14.8397C22.25 13.2797 22.25 10.7197 21.25 9.14969ZM12 16.0397C9.76 16.0397 7.96 14.2297 7.96 11.9997C7.96 9.76969 9.76 7.95969 12 7.95969C14.24 7.95969 16.04 9.76969 16.04 11.9997C16.04 14.2297 14.24 16.0397 12 16.0397Z"/>
                          <path d="M11.9984 9.14062C10.4284 9.14062 9.14844 10.4206 9.14844 12.0006C9.14844 13.5706 10.4284 14.8506 11.9984 14.8506C13.5684 14.8506 14.8584 13.5706 14.8584 12.0006C14.8584 10.4306 13.5684 9.14062 11.9984 9.14062Z"/>
                        </svg>
                      </o-rbutton>
                      <o-rbutton id="open-${id}" ball small title="Open">
                        <svg class="button-svg" viewBox="0 0 24 24">
                          <path d="M16.25 22.5C17.2165 22.5 18 21.7165 18 20.75C18 19.7835 17.2165 19 16.25 19C15.2835 19 14.5 19.7835 14.5 20.75C14.5 21.7165 15.2835 22.5 16.25 22.5Z"/>
                          <path d="M8.25 22.5C9.2165 22.5 10 21.7165 10 20.75C10 19.7835 9.2165 19 8.25 19C7.2835 19 6.5 19.7835 6.5 20.75C6.5 21.7165 7.2835 22.5 8.25 22.5Z"/>
                          <path d="M4.84 3.94L4.64 6.39C4.6 6.86 4.97 7.25 5.44 7.25H20.75C21.17 7.25 21.52 6.93 21.55 6.51C21.68 4.74 20.33 3.3 18.56 3.3H6.27C6.17 2.86 5.97 2.44 5.66 2.09C5.16 1.56 4.46 1.25 3.74 1.25H2C1.59 1.25 1.25 1.59 1.25 2C1.25 2.41 1.59 2.75 2 2.75H3.74C4.05 2.75 4.34 2.88 4.55 3.1C4.76 3.33 4.86 3.63 4.84 3.94Z"/>
                          <path d="M20.5101 8.75H5.17005C4.75005 8.75 4.41005 9.07 4.37005 9.48L4.01005 13.83C3.87005 15.54 5.21005 17 6.92005 17H18.0401C19.5401 17 20.8601 15.77 20.9701 14.27L21.3001 9.6C21.3401 9.14 20.9801 8.75 20.5101 8.75Z"/>
                        </svg>
                      </o-rbutton>
                      <div id="link-${id}" style="display: none;"></div>
                      <div id="name2-${id}" style="display: none;"></div>
                      <div id="image-${id}" style="display: none;"></div>
                    </div>
                  </div>
                </div>
                ${list2}
              </div>
            </div>`
  }

  function createStoreRowHTML(id, store, name) {
    return `<div class="vc">
              <o-sbutton id="title-${id}" text="${name}" style="margin: 10px;" onclick="openStore('${name}', '${store}')">
                <svg viewBox="0 0 24 24">
                  <path d="M19.8305 8.6998L15.3005 4.1698C14.3505 3.2198 13.0405 2.7098 11.7005 2.7798L6.70046 3.0198C4.70046 3.1098 3.11046 4.6998 3.01046 6.6898L2.77046 11.6898C2.71046 13.0298 3.21046 14.3398 4.16046 15.2898L8.69046 19.8198C10.5505 21.6798 13.5705 21.6798 15.4405 19.8198L19.8305 15.4298C21.7005 13.5798 21.7005 10.5598 19.8305 8.6998ZM9.50046 12.3798C7.91046 12.3798 6.62046 11.0898 6.62046 9.4998C6.62046 7.9098 7.91046 6.6198 9.50046 6.6198C11.0905 6.6198 12.3805 7.9098 12.3805 9.4998C12.3805 11.0898 11.0905 12.3798 9.50046 12.3798Z"/>
                </svg>
              </o-sbutton>
              <div id="storeRowList" class="hc" style="position: relative;">
                <div class="hc" style="height: 100%; position: absolute; left: -25px; align-items: center; z-index: 2;">
                  <o-rbutton ball id="left-${id}" background="text1" color="button" style="--oBorderC: transparent;">
                    <svg viewBox="0 0 24 24">
                      <path d="M13.9783 5.31877L10.7683 8.52877L8.79828 10.4888C7.96828 11.3188 7.96828 12.6688 8.79828 13.4988L13.9783 18.6788C14.6583 19.3588 15.8183 18.8688 15.8183 17.9188V12.3088V6.07877C15.8183 5.11877 14.6583 4.63877 13.9783 5.31877Z"/>
                    </svg>
                  </o-rbutton>
                </div>

                <div id="list-${id}" class="hc" style="gap: 20px; overflow-x: auto; padding: 10px; padding-top: 0; scroll-behavior: smooth;"></div>

                <div class="hc" style="height: 100%; position: absolute; right: -25px; align-items: center; z-index: 2;">
                  <o-rbutton ball id="right-${id}" background="text1" color="button" style="--oBorderC: transparent;">
                    <svg viewBox="0 0 24 24">
                      <path d="M15.1997 10.4919L13.2297 8.52188L10.0197 5.31188C9.33969 4.64188 8.17969 5.12188 8.17969 6.08188V12.3119V17.9219C8.17969 18.8819 9.33969 19.3619 10.0197 18.6819L15.1997 13.5019C16.0297 12.6819 16.0297 11.3219 15.1997 10.4919Z"/>
                    </svg>
                  </o-rbutton>
                </div>
              </div>
            </div>`
  }

  //OTHER
  function addListener(id, link, storeTag, name, info) {
    clickListener(id, function() {
      document.getElementById('featured-'+storeTag).style.backgroundImage = document.getElementById('img-'+id).style.backgroundImage
      if (info == '') document.getElementById('name-'+storeTag).innerHTML = name
      else document.getElementById('name-'+storeTag).innerHTML = name+'<div style="font-size: 13px;"><br />'+info+'</div>'
      document.getElementById('link-'+storeTag).innerHTML = link
      document.getElementById('name2-'+storeTag).innerHTML = name
    })

    contextListener(id, function() {
      let dialogid = createDialog(fs.readFileSync(currentModule+'cover.html').toString(), 'Game Cover')

      //PREPARE DIALOG
      let url = document.getElementById('img-'+id).style.backgroundImage
      document.getElementById('coverImage').src = url.substring(5, url.length-2)
    })
  }

  function addListenerRow(id, link, storeTag, name, info) {
    clickListener('save-'+id, function() {
      event.stopPropagation()
      let image = document.getElementById('img-'+id).src
      if (!Array.isArray(store.saved)) store.saved = []
      //CHECK IF IS ADDED
      let added = false
      for (i in store.saved) {
        if (store.saved[i].link == link) 
          added = true
      }
      //ADD
      if (added) {
        createNoti('Store', 'Already in Save List')
      } else {
        store.saved.push({
          name: name,
          link: link,
          image: image
        }) 
        setKey('store', store)
        createNoti('Store', 'Added to Save List')
      }
    })

    clickListener('preview-'+id, function() {
      event.stopPropagation()
      createNoti('Store', name)
      ipcRenderer.send('newSimpleWindow', link)
    })  
  
    clickListener(id, function() {
      createNoti('Store', name)
      openLink(link)
    })

    contextListener(id, function() {
      let dialogid = createDialog(fs.readFileSync(currentModule+'cover.html').toString(), 'Game Cover')

      //PREPARE DIALOG
      document.getElementById('coverImage').src = document.getElementById('img-'+id).src
    })
  }

  function titleCase(str) {
    var splitStr = str.toLowerCase().split(' ')
    for (var i = 0; i < splitStr.length; i++) {
      splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1)
    }
    return splitStr.join(' ')
  }

  function openStore(name, link) {
    createNoti('Store', name+' Official Page')
    shell.openExternal(link)
  }

  function openLink(link) {
    shell.openExternal(link)
  }
</script>