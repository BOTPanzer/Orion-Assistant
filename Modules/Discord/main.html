<div class="win-c">
  <div class="win-t">
    <div id="title" class="title">Discord Rich Presence</div>
    <div style="flex-grow: 1;"></div>
    <div class="hc" style="align-items: center;">  
      <div class="button-text">Status:</div>
      <div id="discordIsLoaded" style="width: 20px; height: 20px; border-radius: 10px; background: var(--danger);"></div>
    </div>
  </div>

  <div class="hc" style="width: 100%; margin-top: 20px; gap: 20px;">
    <o-rbutton style="flex-grow: 1;" onclick="document.getElementById('discordClient').input.focus()">
      <o-input id="discordClient" placeholder="Client ID" label="Client ID" max="30" transparent style="flex-grow: 1;"></o-input>
    </o-rbutton>
    
    <div class="hc" style="width: calc(50% - 10px); gap: 20px;">
      <o-rbutton id="discordSave" text="Save" style="flex-grow: 1;">
        <svg viewBox="0 0 24 24">
          <path d="M16.44 3.10156C14.63 3.10156 13.01 3.98156 12 5.33156C10.99 3.98156 9.37 3.10156 7.56 3.10156C4.49 3.10156 2 5.60156 2 8.69156C2 9.88156 2.19 10.9816 2.52 12.0016C4.1 17.0016 8.97 19.9916 11.38 20.8116C11.72 20.9316 12.28 20.9316 12.62 20.8116C15.03 19.9916 19.9 17.0016 21.48 12.0016C21.81 10.9816 22 9.88156 22 8.69156C22 5.60156 19.51 3.10156 16.44 3.10156Z"/>
        </svg>
      </o-rbutton>
      <o-rbutton id="discordLoad" text="Load" style="flex-grow: 1;">
        <svg viewBox="0 0 24 24">
          <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM14.66 13.73L13.38 14.47L12.1 15.21C10.45 16.16 9.1 15.38 9.1 13.48V12V10.52C9.1 8.61 10.45 7.84 12.1 8.79L13.38 9.53L14.66 10.27C16.31 11.22 16.31 12.78 14.66 13.73Z" />
        </svg>
      </o-rbutton>
      <o-rbutton id="discordDestroy" text="Destroy" style="flex-grow: 1;">
        <svg viewBox="0 0 24 24">
          <path d="M21.0697 5.23C19.4597 5.07 17.8497 4.95 16.2297 4.86V4.85L16.0097 3.55C15.8597 2.63 15.6397 1.25 13.2997 1.25H10.6797C8.34967 1.25 8.12967 2.57 7.96967 3.54L7.75967 4.82C6.82967 4.88 5.89967 4.94 4.96967 5.03L2.92967 5.23C2.50967 5.27 2.20967 5.64 2.24967 6.05C2.28967 6.46 2.64967 6.76 3.06967 6.72L5.10967 6.52C10.3497 6 15.6297 6.2 20.9297 6.73C20.9597 6.73 20.9797 6.73 21.0097 6.73C21.3897 6.73 21.7197 6.44 21.7597 6.05C21.7897 5.64 21.4897 5.27 21.0697 5.23Z"/>
          <path d="M19.2297 8.14C18.9897 7.89 18.6597 7.75 18.3197 7.75H5.67975C5.33975 7.75 4.99975 7.89 4.76975 8.14C4.53975 8.39 4.40975 8.73 4.42975 9.08L5.04975 19.34C5.15975 20.86 5.29975 22.76 8.78975 22.76H15.2097C18.6997 22.76 18.8398 20.87 18.9497 19.34L19.5697 9.09C19.5897 8.73 19.4597 8.39 19.2297 8.14ZM13.6597 17.75H10.3297C9.91975 17.75 9.57975 17.41 9.57975 17C9.57975 16.59 9.91975 16.25 10.3297 16.25H13.6597C14.0697 16.25 14.4097 16.59 14.4097 17C14.4097 17.41 14.0697 17.75 13.6597 17.75ZM14.4997 13.75H9.49975C9.08975 13.75 8.74975 13.41 8.74975 13C8.74975 12.59 9.08975 12.25 9.49975 12.25H14.4997C14.9097 12.25 15.2497 12.59 15.2497 13C15.2497 13.41 14.9097 13.75 14.4997 13.75Z"/>
        </svg>
      </o-rbutton>  
    </div>
  </div>

  <div class="hc" style="width: 100%; margin-top: 20px; gap: 20px;">
    <o-rbutton style="width: 100%;" onclick="document.getElementById('discordState').input.focus()">
      <o-input id="discordState" placeholder="State" label="State" max="30" transparent style="flex-grow: 1;"></o-input>
    </o-rbutton>
    <o-rbutton style="width: 100%;" onclick="document.getElementById('discordDetails').input.focus()">
      <o-input id="discordDetails" placeholder="Details" label="Details" max="30" transparent style="flex-grow: 1;"></o-input>
    </o-rbutton>
  </div>

  <div class="hc" style="width: 100%; margin-top: 20px; gap: 20px;">
    <o-rbutton style="width: 100%; padding-right: 10px; gap: 10px;" onclick="document.getElementById('discordStart').input.focus()">
      <o-input id="discordStart" placeholder="Start timestamp" label="Start timestamp" transparent style="flex-grow: 1;"></o-input>
      <svg id="discordStartDate" class="button-svg" viewBox="0 0 24 24">
        <path d="M12.0001 4.64844C7.22008 4.64844 3.33008 8.53844 3.33008 13.3184C3.33008 18.0984 7.22008 21.9984 12.0001 21.9984C16.7801 21.9984 20.6701 18.1084 20.6701 13.3284C20.6701 8.54844 16.7801 4.64844 12.0001 4.64844ZM12.7501 12.9984C12.7501 13.4084 12.4101 13.7484 12.0001 13.7484C11.5901 13.7484 11.2501 13.4084 11.2501 12.9984V7.99844C11.2501 7.58844 11.5901 7.24844 12.0001 7.24844C12.4101 7.24844 12.7501 7.58844 12.7501 7.99844V12.9984Z"/>
        <path d="M14.8906 3.45H9.11062C8.71062 3.45 8.39062 3.13 8.39062 2.73C8.39062 2.33 8.71062 2 9.11062 2H14.8906C15.2906 2 15.6106 2.32 15.6106 2.72C15.6106 3.12 15.2906 3.45 14.8906 3.45Z"/>
      </svg>
    </o-rbutton>
    <o-rbutton style="width: 100%; padding-right: 10px; gap: 10px;" onclick="document.getElementById('discordEnd').input.focus()">
      <o-input id="discordEnd" placeholder="End timestamp" label="End timestamp" transparent style="flex-grow: 1;"></o-input>
      <svg id="discordEndDate" class="button-svg" viewBox="0 0 24 24">
        <path d="M12.0001 4.64844C7.22008 4.64844 3.33008 8.53844 3.33008 13.3184C3.33008 18.0984 7.22008 21.9984 12.0001 21.9984C16.7801 21.9984 20.6701 18.1084 20.6701 13.3284C20.6701 8.54844 16.7801 4.64844 12.0001 4.64844ZM12.7501 12.9984C12.7501 13.4084 12.4101 13.7484 12.0001 13.7484C11.5901 13.7484 11.2501 13.4084 11.2501 12.9984V7.99844C11.2501 7.58844 11.5901 7.24844 12.0001 7.24844C12.4101 7.24844 12.7501 7.58844 12.7501 7.99844V12.9984Z"/>
        <path d="M14.8906 3.45H9.11062C8.71062 3.45 8.39062 3.13 8.39062 2.73C8.39062 2.33 8.71062 2 9.11062 2H14.8906C15.2906 2 15.6106 2.32 15.6106 2.72C15.6106 3.12 15.2906 3.45 14.8906 3.45Z"/>
      </svg>
    </o-rbutton>
  </div>
  
  <div class="hc" style="width: 100%; margin-top: 20px; gap: 20px;">
    <o-rbutton style="width: 100%;" onclick="document.getElementById('discordLargeImage').input.focus()">
      <o-input id="discordLargeImage" placeholder="Large image key" label="Large image key" max="30" transparent style="flex-grow: 1;"></o-input>
    </o-rbutton>
    <o-rbutton style="width: 100%;" onclick="document.getElementById('discordLargeText').input.focus()">
      <o-input id="discordLargeText" placeholder="Large image text" label="Large image text" max="30" transparent style="flex-grow: 1;"></o-input>
    </o-rbutton>
  </div>
</div>





<script>
   /*$    /$$                             
  | $$   | $$                             
  | $$   | $$ /$$$$$$   /$$$$$$   /$$$$$$$
  |  $$ / $$/|____  $$ /$$__  $$ /$$_____/
   \  $$ $$/  /$$$$$$$| $$  \__/|  $$$$$$ 
    \  $$$/  /$$__  $$| $$       \____  $$
     \  $/  |  $$$$$$$| $$       /$$$$$$$/
      \_/    \_______/|__/      |______*/ 
  
  discord = getKey('discord')

   /*$$$$$$$                              /$$     /$$                              
  | $$_____/                             | $$    |__/                              
  | $$    /$$   /$$ /$$$$$$$   /$$$$$$$ /$$$$$$   /$$  /$$$$$$  /$$$$$$$   /$$$$$$$
  | $$$$$| $$  | $$| $$__  $$ /$$_____/|_  $$_/  | $$ /$$__  $$| $$__  $$ /$$_____/
  | $$__/| $$  | $$| $$  \ $$| $$        | $$    | $$| $$  \ $$| $$  \ $$|  $$$$$$ 
  | $$   | $$  | $$| $$  | $$| $$        | $$ /$$| $$| $$  | $$| $$  | $$ \____  $$
  | $$   |  $$$$$$/| $$  | $$|  $$$$$$$  |  $$$$/| $$|  $$$$$$/| $$  | $$ /$$$$$$$/
  |__/    \______/ |__/  |__/ \_______/   \___/  |__/ \______/ |__/  |__/|______*/ 

  function discordSave(noti) {
    if (noti == undefined) noti = false

    //CLIENT ID
    discord.clientid = document.getElementById('discordClient').value
    //STATE
    discord.state = document.getElementById('discordState').value
    //DETAILS
    discord.details = document.getElementById('discordDetails').value
    //START
    discord.start = document.getElementById('discordStart').value
    //END
    discord.end = document.getElementById('discordEnd').value 
    //LARGE IMAGE
    discord.largeImage = document.getElementById('discordLargeImage').value
    //LARGE TEXT
    discord.largeText = document.getElementById('discordLargeText').value

    //UPDATE KEY
    setKey('discord', discord)
    
    //NOTI
    if (noti) createNoti('Discord', 'Rich presence saved')
  }

  function startDiscord() {
    /*const activity = {
      details: 'Details',
      state: 'State',
      assets: {
          largeImage: 'large',
          largeText: 'Large',
          samllImage: 'small',
          smallText: 'Small'
      },
      timestamps: {
          startAt: new Date(),
          endAt: new Date()
      },
      secrets: {
          match: 'match',
          join: 'join',
          spectate: 'spectate'
      },
      party: {
          id: 'id',
          currentSize: 1,
          maxSize: 5
      }
    }*/

    const RPC = require('discord-rpc')
    const client = new RPC.Client({ transport: 'ipc' })

    let activity = {
        state: 'Playing Coop',
        details: "Ranked",
        assets: {
          large_image: "sera",
          large_text: "maricón"
        },
        buttons: [
          {
              "label": "lol",
              "url": "https://www.pornhub.com"
          },
        ],
        timestamps: { start: Date.now() },
        instance: true,
    };

    client.on('ready', async () => {
        client.request("SET_ACTIVITY", { pid: process.pid, activity: activity });
        console.log("Client Ready")
    })

    client.on('connected', async () => {
        console.log("RPC Connected")
    })

    client.login({ clientId: "947567591285727312" })

    /*Discord.Activity
        .update({
          details: 'Ranked',
          state: 'Playing Coop',
          assets: {
              largeImage: 'sera',
              largeText: 'Maricón'
          },
          timestamps: {
              startAt: new Date()
          },
          party: {
              id: 'id',
              currentSize: 1,
              maxSize: 5
          }
        }).then(function() { console.log('Rich Presence updated') });*/
  }


   /*$       /$$             /$$                                                      
  | $$      |__/            | $$                                                      
  | $$       /$$  /$$$$$$$ /$$$$$$    /$$$$$$  /$$$$$$$   /$$$$$$   /$$$$$$   /$$$$$$$
  | $$      | $$ /$$_____/|_  $$_/   /$$__  $$| $$__  $$ /$$__  $$ /$$__  $$ /$$_____/
  | $$      | $$|  $$$$$$   | $$    | $$$$$$$$| $$  \ $$| $$$$$$$$| $$  \__/|  $$$$$$ 
  | $$      | $$ \____  $$  | $$ /$$| $$_____/| $$  | $$| $$_____/| $$       \____  $$
  | $$$$$$$$| $$ /$$$$$$$/  |  $$$$/|  $$$$$$$| $$  | $$|  $$$$$$$| $$       /$$$$$$$/
  |________/|__/|_______/    \___/   \_______/|__/  |__/ \_______/|__/      |______*/ 

  //SAVE
  clickListener('discordSave', function() {
    discordSave(true)
  })

  //LOAD
  clickListener('discordLoad', function() {
    //SAVE VARIABLES
    discordSave(false)

    //CREATE ACTIVITY
    let activity = {
        timestamps: {},
        assets: {},
        instance: true
    }
    
    //CLIENT ID
    if (discord.clientid == '') {
      console.log('client id is blank')
      return
    }
    //STATE
    if (discord.state != '') activity.state = discord.state
    //DETAILS
    if (discord.details != '') activity.details = discord.details
    //START
    if (discord.start != '') {
      let i = parseInt(discord.start)
      if (i != NaN) activity.timestamps.start = i
    }
    //END
    if (discord.end != '') {
      let i = parseInt(discord.end)
      if (i != NaN) activity.timestamps.end = i
    }
    //LARGE IMAGE
    if (discord.largeImage != '') activity.assets.large_image = discord.largeImage
    //LARGE TEXT
    if (discord.largeText != '') activity.assets.large_text = discord.largeText

    //LOAD
    discordActivity = activity
    discordConnect(discord.clientid)
  })

  //DESTROY
  clickListener('discordDestroy', function() {
    if (discordClient == undefined) return
    discordClient.destroy()
    discordClient = undefined
    discordLastId = ''
    document.getElementById('discordIsLoaded').style.background = 'var(--danger)'
    createNoti('Discord' ,'Client destroyed')
  })

  //START & END TIMESTAMPS
  clickListener('discordStartDate', function() {
    event.stopPropagation()
    document.getElementById('discordStart').value = Date.now()
  })

  clickListener('discordEndDate', function() {
    event.stopPropagation()
    document.getElementById('discordEnd').value = Date.now()
  })


    /*$$$$$                  /$$          
   /$$__  $$                | $$          
  | $$  \__/  /$$$$$$   /$$$$$$$  /$$$$$$ 
  | $$       /$$__  $$ /$$__  $$ /$$__  $$
  | $$      | $$  \ $$| $$  | $$| $$$$$$$$
  | $$    $$| $$  | $$| $$  | $$| $$_____/
  |  $$$$$$/|  $$$$$$/|  $$$$$$$|  $$$$$$$
   \______/  \______/  \_______/ \______*/

  //Settings key
  if (discord == undefined) {
    discord = {}
    setKey('discord', discord)
  } else {
    if (discord.clientid != undefined) 
      document.getElementById('discordClient').value = discord.clientid
    if (discord.state != undefined) 
      document.getElementById('discordState').value = discord.state
    if (discord.details != undefined) 
      document.getElementById('discordDetails').value = discord.details
    if (discord.start != undefined) 
      document.getElementById('discordStart').value = discord.start
    if (discord.end != undefined) 
      document.getElementById('discordEnd').value = discord.end 
    if (discord.largeImage != undefined) 
      document.getElementById('discordLargeImage').value = discord.largeImage
    if (discord.largeText != undefined) 
      document.getElementById('discordLargeText').value = discord.largeText
  }

  if (discordReady) 
    document.getElementById('discordIsLoaded').style.background = 'var(--success)'
</script>